
^combat_ready_vehicle:
	Inherits@PIPS: ^CargoPips
	Inherits: ^Vehicle
	Buildable:
		Queue: Vehicle
		Prerequisites: vehicles.any
	Tooltip:
		Name: Vehicle
	RevealsShroud:
		Range: 2c0
	Mobile:
		TurnSpeed: 8
		Speed: 56
	Passenger:
		CargoType: Vehicle
		ConditionToCargo: ammo
		Weight: 10
	Cargo:
		Types: ammo
		MaxWeight: 1
		PipCount: 1
		LoadingCondition: notmobile
		LoadedCondition: full
		PassengerConditions:

##################### CHASSIS #####################
# these are needed to mount turrets on a vehicle ##
###################################################

^chassis_prototype:
	Inherits@PIPS: ^CargoPips
	Turreted:
		TurnSpeed: 12
		Offset: -200,0,0
	AttackTurreted:
		Voice: Attack
		PauseOnCondition: empdisable
	WithMuzzleOverlay:
	Passenger:
		CargoType: Vehicle
		Weight: 10

^light_chassis_prototype:
	Inherits@1: ^chassis_prototype
	Inherits@2: ^light_turrets
	Buildable:
		Queue: Vehicle
		Prerequisites: vehicles.any
	Passenger:
		ConditionToCargo: light_chassis

^medium_chassis_prototype:
	Inherits@1: ^chassis_prototype
	Inherits@3: ^medium_turrets
	Buildable:
		Queue: Vehicle
		Prerequisites: vehicles.any, radar
	Passenger:
		ConditionToCargo: medium_chassis

^heavy_chassis_prototype:
	Inherits@1: ^chassis_prototype
	Inherits@4: ^heavy_turrets
	Buildable:
		Queue: Vehicle
		Prerequisites: vehicles.any, tech
	Passenger:
		ConditionToCargo: heavy_chassis

##################### TURRETS #####################
#   the traits that list the mountable turrets   ##
###################################################

^turret_prototype:
	Inherits: ^Vehicle
	Tooltip:
		Name: Turret
	Health:
		HP: 5000
	RevealsShroud:
		Range: 2c0
	Mobile:
		TurnSpeed: 8
		Speed: 56

################# LIGHT TURRETS #################

^light_turret_prototype:
	Inherits: ^turret_prototype
	Buildable:
		Queue: Light_Chassis
	Valued:
		Cost: 100
	Passenger:
		CargoType: light_turret
		ConditionToCargoOfCargo: light_turret_mounted
		Weight: 5

^light_turrets:
	Turreted:
		TurnSpeed:  12
	# new light turrets must be added here
	Inherits: maxim_turret_mounted
	Inherits: bakraa_turret_mounted
	Inherits: flak_turret_mounted
	Cargo:
		Types: light_turret, ammo
		MaxWeight: 8
		PipCount: 8
		LoadingCondition: notmobile
		LoadedCondition: full
		PassengerConditions:

maxim_turret:
	Inherits: ^light_turret_prototype
	Buildable:
		BuildPaletteOrder: 0
		Description: Turret with Anti-Air Barrels
	Tooltip:
		Name: Maxim Machine Guns

maxim_turret_mounted:                         ## Maxim Turret
	WithSpriteTurret@maxim_turret:
		RequiresCondition: maxim_turret
		Sequence: maxim_turret
	ExplodeWeapon@Casing_maxim_turret:
		Weapon: QuadFireCasing
		LocalOffset: -200,0,1200
		RequiresCondition: attack && maxim_turret
		RevokeDelay: 1
	GrantConditionOnAttack@Casing_maxim_turret:
		Condition: attack
		ArmamentNames: primary
		RequiresCondition: maxim_turret
	Armament@Fakebullet_maxim_turret:
		Weapon: QuadFireLine
		LocalOffset: 1200,0,1000
		PauseOnCondition: empdisable
		RequiresCondition: maxim_turret
	Armament@FakebulletAA_maxim_turret:
		Weapon: QuadFireLineAA
		LocalOffset: 1200,0,1000
		PauseOnCondition: empdisable
		RequiresCondition: maxim_turret
	Armament@maxim_turret:
		Weapon: QuadFire
		MuzzleSequence: muzzle
		LocalOffset: 800,0,700
		MuzzlePalette: apgrey
		PauseOnCondition: empdisable
		RequiresCondition: maxim_turret
	Armament@AA1_maxim_turret:
		Weapon: QuadFireAA
		MuzzleSequence: muzzle
		MuzzlePalette: apgrey
		LocalOffset: 800,0,700
		PauseOnCondition: empdisable
		RequiresCondition: maxim_turret
	Cargo:
		PassengerConditions:
			maxim_turret: maxim_turret


flak_turret:
	Inherits: ^light_turret_prototype
	Buildable:
		BuildPaletteOrder: 0
		Description: Turret with Anti-Air Barrels
	Tooltip:
		Name: Flak Turret

flak_turret_mounted:                         ## Flak Turret
	WithSpriteTurret@flak_turret:
		RequiresCondition: flak_turret
		Sequence: flak_turret
	ExplodeWeapon@Casing_flak_turret:
		Weapon: QuadFireCasing
		LocalOffset: -200,0,1200
		RequiresCondition: attack && flak_turret
		RevokeDelay: 1
	GrantConditionOnAttack@Casing_flak_turret:
		Condition: attack
		ArmamentNames: primary
		RequiresCondition: flak_turret
	Armament@Fakebullet_flak_turret:
		Weapon: QuadFireLine
		LocalOffset: 1200,0,1000
		PauseOnCondition: empdisable
		RequiresCondition: flak_turret
	Armament@FakebulletAA_flak_turret:
		Weapon: QuadFireLineAA
		LocalOffset: 1200,0,1000
		PauseOnCondition: empdisable
		RequiresCondition: flak_turret
	Armament@flak_turret:
		Weapon: QuadFire
		MuzzleSequence: muzzle
		LocalOffset: 800,0,700
		MuzzlePalette: apgrey
		PauseOnCondition: empdisable
		RequiresCondition: flak_turret
	Armament@AA1_flak_turret:
		Weapon: QuadFireAA
		MuzzleSequence: muzzle
		MuzzlePalette: apgrey
		LocalOffset: 800,0,700
		PauseOnCondition: empdisable
		RequiresCondition: flak_turret
	Cargo:
		PassengerConditions:
			flak_turret: flak_turret


bakraa_turret:
	Inherits: ^light_turret_prototype
	Buildable:
		BuildPaletteOrder: 0
		Description: Turret with Anti-Air Barrels
	Tooltip:
		Name: Bakraa Turret Syndrome

bakraa_turret_mounted:                         ## Bakraa Turret
	WithSpriteTurret@bakraa_turret:
		RequiresCondition: bakraa_turret
		Sequence: bakraa_turret
	ExplodeWeapon@Casing_bakraa_turret:
		Weapon: QuadFireCasing
		LocalOffset: -200,0,1200
		RequiresCondition: attack && bakraa_turret
		RevokeDelay: 1
	GrantConditionOnAttack@Casing_bakraa_turret:
		Condition: attack
		ArmamentNames: primary
		RequiresCondition: bakraa_turret
	Armament@Fakebullet_bakraa_turret:
		Weapon: QuadFireLine
		LocalOffset: 1200,0,1000
		PauseOnCondition: empdisable
		RequiresCondition: bakraa_turret
	Armament@FakebulletAA_bakraa_turret:
		Weapon: QuadFireLineAA
		LocalOffset: 1200,0,1000
		PauseOnCondition: empdisable
		RequiresCondition: bakraa_turret
	Armament@bakraa_turret:
		Weapon: QuadFire
		MuzzleSequence: muzzle
		LocalOffset: 800,0,700
		MuzzlePalette: apgrey
		PauseOnCondition: empdisable
		RequiresCondition: bakraa_turret
	Armament@AA1_bakraa_turret:
		Weapon: QuadFireAA
		MuzzleSequence: muzzle
		MuzzlePalette: apgrey
		LocalOffset: 800,0,700
		PauseOnCondition: empdisable
		RequiresCondition: bakraa_turret
	Cargo:
		PassengerConditions:
			bakraa_turret: bakraa_turret


################# MEDIUM TURRETS #################

^medium_turret_prototype:
	Inherits: ^turret_prototype
	Buildable:
		Queue: Medium_Chassis
	Valued:
		Cost: 200
	Passenger:
		CargoType: medium_turret
		ConditionToCargoOfCargo: medium_turret_mounted
		Weight: 5

^medium_turrets:
	Turreted:
		TurnSpeed: 8
	# new medium turrets must be added here
	Inherits: t-34_turret_mounted
	Cargo:
		Types: medium_turret, ammo
		MaxWeight: 8
		PipCount: 8
		LoadingCondition: notmobile
		LoadedCondition: full
		PassengerConditions:


t-34_turret:
	Inherits: ^medium_turret_prototype
	Buildable:
		BuildPaletteOrder: 0
		Description: A cannon turret loadable with shells.
	Tooltip:
		Name: F-34 Turret (76mm)

t-34_turret_mounted:                         ## T-34 Turret
	WithSpriteTurret@t-34_turret:
		RequiresCondition: t-34_turret
		Sequence: t-34_turret
	Armament@t-34_turret1:
		Weapon: LynxCannon
		LocalOffset: 400,0,600
		MuzzleSequence: muzzle
		MuzzleSplitFacings: 8
		Recoil: 0c128
		PauseOnCondition: empdisable
		RequiresCondition: t-34_turret
	Armament@casing_t-34_turret1:
		Weapon: LynxCannonShellCasing
		LocalOffset: 0,0,600
		PauseOnCondition: empdisable
		RequiresCondition: t-34_turret
	Cargo:
		PassengerConditions:
			t-34_turret: t-34_turret


################# HEAVY TURRETS #################

^heavy_turret_prototype:
	Inherits: ^turret_prototype
	Buildable:
		Queue: Heavy_Chassis
	Valued:
		Cost: 300
	Passenger:
		CargoType: heavy_turret
		ConditionToCargoOfCargo: heavy_turret_mounted
		Weight: 5

^heavy_turrets:
	Turreted:
		TurnSpeed: 4
	# new heavy turrets must be added here
	Inherits: kv-2_turret_mounted
	Cargo:
		Types: heavy_turret, ammo
		MaxWeight: 8
		PipCount: 8
		LoadingCondition: notmobile
		LoadedCondition: full
		PassengerConditions:


kv-2_turret:
	Inherits: ^heavy_turret_prototype
	Buildable:
		BuildPaletteOrder: 0
		Description: Turret with 2 Barrels
	Tooltip:
		Name: M10 Turret

kv-2_turret_mounted:
	WithSpriteTurret@kv-2_turret:
		RequiresCondition: kv-2_turret
		Sequence: kv2_turret
	Armament@kv-2_turret:
		Weapon: 4tnkgun
		LocalOffset: 1150,120,550, 1150,-120,550
		MuzzleSequence: muzzle
		Recoil: 127
		RecoilRecovery: 26
		PauseOnCondition: empdisable
		RequiresCondition: kv-2_turret
	Armament@CASING_kv-2_turret:
		Weapon: 4TNKGUNShellCasing
		LocalOffset: 0,120,550, 0,-120,550
		PauseOnCondition: empdisable
		RequiresCondition: kv-2_turret
	Cargo:
		PassengerConditions:
			kv-2_turret: kv-2_turret
