^conyard_prototype:
	Inherits: ^Building
	Inherits@1: ^4x4Shape
	Inherits@2: ^AICashCheat
	Inherits@AIbuilding: ^AIbuildingMicroControl
	Building:
		Footprint: xxxx xxxx xxxx xxxx
		BuildSounds: facbld1.aud
		Dimensions: 4,4
	Buildable:
		Queue: Building
		BuildPaletteOrder: 1000
		Prerequisites: ~disabled
		Description: Builds base structures.
	Health:
		HP: 180000
	Production:
		Produces: Building, Defense
	Valued:
		Cost: 2000
	Tooltip:
		Name: Construction Yard
	BaseProvider:
		Range: 14c0
	Targetable:
		TargetTypes: Building, Ground, C4, SpyInfiltrate, MindControlImmune, ConsideredValuableForAI
	BaseBuilding:
	Transforms:
		IntoActor: mcv
		Offset: 1,1
		Facing: 384
		DeployCursor: undeploy
		PauseOnCondition: mindcontrolled || empdisable
	TransformsIntoMobile:
		RequiresCondition: !Building-Buildup
		Locomotor: InfantryCrusherVehicle
		Voice: Move
		RequiresForceMove: true
	TransformsIntoRepairable:
		RequiresCondition: !Building-Buildup
		RepairActors: gadept, scrdepot, tdrepd
		Voice: Move
		RequiresForceMove: true
	TransformsIntoPassenger:
		RequiresCondition: !Building-Buildup
		CargoType: Vehicle
		Voice: Move
		RequiresForceMove: true
	ProductionBar@Building:
		ProductionType: Building
	ProductionBar@Defense:
		ProductionType: Defense
		Color: 8A8A8A
	WithIdleOverlay@TOP:
		Sequence: idle-top
		RequiresCondition: !Building-Buildup
	WithIdleOverlay@SIDE:
		Sequence: idle-side
		RequiresCondition: !Building-Buildup
	WithIdleOverlay@FRONT:
		Sequence: idle-front
		RequiresCondition: !Building-Buildup
	WithBuildingPlacedOverlay:
	ProvidesPrerequisite@walls:
		Factions: gdi, cab
		Prerequisite: sharedwall
		ResetOnOwnerChange: true
	ProvidesPrerequisite@nodgate:
		Factions: nod, cab, gdi
		Prerequisite: nodgate
		ResetOnOwnerChange: true
	ProvidesPrerequisite@humanstuff:
		Factions: gdi, nod, cab, mut
		Prerequisite: humanstuff
		ResetOnOwnerChange: true
	RequiresBuildableArea:
		AreaTypes: building
	IsometricSelectable:
		DecorationHeight: 36
	Power@AICheatPower:
		RequiresCondition: AIShattered
		Amount: 80


soviet_conyard:
	Inherits: ^conyard_prototype
	Inherits@1: ^MutRender
	Transforms:
		IntoActor: mutmcv
		Offset: 1,1
		Facing: 640
		DeployCursor: undeploy
		PauseOnCondition: mindcontrolled || empdisable
	-WithIdleOverlay@SIDE:
	WithBuildingPlacedAnimation@body:
		Sequence: crane-overlay
		Palette: unittem_merophage
	WithIdleOverlay@TOP:
		Sequence: idle-top
		IsPlayerPalette: true
	WithIdleOverlay@FRONT:
		Sequence: idle-front
		Palette: unittem_merophage
		RequiresCondition: !Building-Buildup
	ProvidesPrerequisite@faction:
		Prerequisite: structures.gdi
	ProvidesPrerequisite@grantself:
		Factions: gdi, nod, cab, mut, scr
		ActorTypes: e2

WEAP.auto:
	Inherits: ^Building
	Inherits@shape: ^4x3Shape
	Building:
		Footprint: xxx= xxx= xxx=
		Dimensions: 4,3
		LocalCenterOffset: 0,-512,0
	Buildable:
		Queue: Building
		BuildPaletteOrder: 80
		Prerequisites: soviet_conyard
		Description: Produces vehicles.
		BuildDurationModifier: 25
	Valued:
		Cost: 3000
	Tooltip:
		Name: Automated War Factory
	Health:
		HP: 150000
	Armor:
		Type: Wood
	RevealsShroud:
		MinRange: 4c0
		Range: 5c0
		RevealGeneratedShroud: False
	RevealsShroud@GAPGEN:
		Range: 4c0
	Power:
		Amount: -100
		RequiresCondition: !being-warped
	WithIdleOverlay@TOP:
		Sequence: idle-top
		IsPlayerPalette: true
	WithIdleOverlay@BIB:
		Sequence: bib
		RequiresCondition: !Building-Buildup
	WithProductionDoorOverlay:
		RequiresCondition: !build-incomplete
		Sequence: build-top
	RallyPoint:
	Exit@1:
		RequiresCondition: !being-captured
		SpawnOffset: 413,-512,0
		ExitCell: 3,1
	Cargo:
		Types: Infantry, Vehicle
		MaxWeight: 10
		PipCount: 10
		PassengerFacing: 0
		LoadingCondition: notmobile
	PeriodicCargoProducer:
		Condition: TyrannyBuff
		Type: Vehicle
		ChargeDuration: 300
		ShowSelectionBar: true
		ChargeColor: FF00FF
	Production:
		Produces: Vehicle
		PauseOnCondition: forceshield || invulnerability || being-warped
	ReloadDelayMultiplier@balance2:
		Modifier: 50
		RequiresCondition: true
	ReloadDelayMultiplier@balance1:
		Modifier: 66
		RequiresCondition: TeamBalance1
	ExternalCondition@TeamBalance:
		Condition: TeamBalance1
	ExternalCondition@TeamBalance:
		Condition: TeamBalance2
	GrantExternalConditionToProduced:
		Condition: autoproduced
